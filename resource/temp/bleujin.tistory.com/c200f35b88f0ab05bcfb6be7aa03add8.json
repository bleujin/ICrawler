{"content":"<div class=\"article\"> \n <p><br /> <br />실행방법 : <br /> 1. 파일을 다운로드 받는다(<a href=\"http://drop.io/datptht/asset/anotherlore-jar\">http://drop.io/datptht/asset/anotherlore-jar</a>&nbsp;&nbsp;anotherLore.jar 약 30M)<br /> 2. 알집으로 열어서 webapps/ 디렉토리만 현재 디렉토리에 압축을 푼다.<br /> &nbsp; &nbsp;현재 디렉토리에&nbsp;다운&nbsp;받은 jar&nbsp;파일 하나와&nbsp;webaspps 디렉토리가 있어야 한다.<br /> &nbsp;&nbsp; 현재 디렉토리&nbsp;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp;anotherLore.jar<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp; webapps/<br /> 3. command 창에서 java -jar anotherLore.jar 로 실행(require&nbsp;JRE1.5 higher)한다.&nbsp;(jetty server가 기동한다.)<br /> 4. <a href=\"http://localhost:8080/board/\">http://localhost:8080/board/</a>&nbsp;&nbsp; 로 접속한다.. 끝. -ㅅ- (중단하려면 Ctrl+c를 누른다.)<br /> <br /><br /> </p>\n <div class=\"imageblock\" style=\"display:inline;\">\n  <span dir=\"http://cfile22.uf.tistory.com/original/1507511C49E1EEF6A8E936\" rel=\"lightbox\" target=\"_blank\"><img src=\"http://cfile22.uf.tistory.com/image/1507511C49E1EEF6A8E936\" style=\"cursor: pointer;\" alt=\"\" height=\"526\" width=\"683\" /></span>\n </div>\n <br /> \n <br />============== 4월 12일\n <br /> \n <br />1. noticeType은 versionable 시키지 않았기에 상관없지만 generalBoard는 versionable code로 되어 있었는데 버전을 3번 수정하는 PK 오류가 나는 걸 수정. \n <br /> \n <br />2. 불필요하게 nodeType을 매번 억세스 하는 걸 수정.\n <br /> \n <br />3. Property.Type에 virtualText, referenceType 추가.\n <br /> 예컨데 generalBoard의 2번째 Textarea는 VirtualText Type으로 되어 있는데 벨로시티 템플릿을 사용한다. \n <br /> 아래와 같이 입력/수정 할 경우..\n <br /> $node.getUUIDString() &lt;br/&gt;&lt;br/&gt;\n <br /> #foreach($n in $node.getNodeByPath('/').getChildNode())\n <br /> &nbsp;&nbsp; $n&lt;br/&gt;\n <br /> #end \n <br /> View 화면에서는 위의 템플릿이 적용된 다른 내용이 보이게 된다. $node는 현재 node를 가르키지만 이를 통해 모든 node를 억세스 가능하다. \n <br /> \n <br />4. 파일공유 사이트 바꿈.\n <br /> \n <br />=============== 4월 5일\n <br /> AL은 DataStore를 확인할 수 있는 NodeTypeInfo, NodeInfo Page가 있고\n <br /> \n <br />AL로 만든 간단한 Sample Program인 Notice, GeneralBoard, Diagram 3가지가 있다. \n <br /> AL은 게시판을 만들어 주는 어드민 모드 프로그램이 아니라 프로그램를 만드는 프로그램이다. 3가지의 다른 데이타 모델을&nbsp;사용하는 샘플 프로그램은 모두 같은 인터페이스 모델로 저장이 된다. \n <br /> \n <br />모든 DataModel은 NodeType으로 쉽게 만들수 있다. \n <br /> anotherLore.jar의 com.bleuji.lore.impl.board에 위의 3개의 샘플 프로그램 소스가 있는데 예를 들어 데이타 모델은 아래와 같이 만들면 된다.\n <br /> \n <p></p> \n <div class=\"java\" align=\"left\"> \n  <table cellspacing=\"0\" cellpadding=\"3\" bgcolor=\"#ffffff\" border=\"0\"> \n   <tbody> \n    <tr>\n     <!-- start source code --> \n     <td valign=\"top\" nowrap=\"\" align=\"left\"><code><br /> <font color=\"#ffffff\">&nbsp;&nbsp;</font><font color=\"#7f0055\"><b>private&nbsp;</b></font><font color=\"#7f0055\"><b>void&nbsp;</b></font><font color=\"#000000\">initBoard</font><font color=\"#000000\">(</font><font color=\"#000000\">AnotherLore&nbsp;lore</font><font color=\"#000000\">)&nbsp;</font><font color=\"#7f0055\"><b>throws&nbsp;</b></font><font color=\"#000000\">RepositoryException&nbsp;</font><font color=\"#000000\">{</font><br /> <font color=\"#ffffff\"></font><br /> <font color=\"#ffffff\">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color=\"#000000\">UserSession&nbsp;session&nbsp;=&nbsp;lore.login</font><font color=\"#000000\">(</font><font color=\"#7f0055\"><b>new&nbsp;</b></font><font color=\"#000000\">TestCredential</font><font color=\"#000000\">(</font><font color=\"#2a00ff\">&quot;admin&quot;</font><font color=\"#000000\">)</font><font color=\"#000000\">,&nbsp;</font><font color=\"#2a00ff\">&quot;localhost&quot;</font><font color=\"#000000\">)</font><font color=\"#000000\">;</font><br /> <font color=\"#ffffff\">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color=\"#000000\">globalStore&nbsp;=&nbsp;session.getGlobalStore</font><font color=\"#000000\">()</font><font color=\"#000000\">;</font><br /> <font color=\"#ffffff\"></font><br /> <font color=\"#ffffff\">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color=\"#000000\">NodeType&nbsp;objectType&nbsp;=&nbsp;globalStore.createNodeType</font><font color=\"#000000\">(</font><font color=\"#000000\">NodeType.NO_SUPERTYPE,&nbsp;</font><font color=\"#2a00ff\">&quot;_object&quot;</font><font color=\"#000000\">,&nbsp;</font><font color=\"#7f0055\"><b>new&nbsp;</b></font><font color=\"#000000\">PropertyDefinition</font><font color=\"#000000\">[</font><font color=\"#990000\">0</font><font color=\"#000000\">])</font><font color=\"#000000\">;</font><br /> <font color=\"#ffffff\">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color=\"#000000\">Node&nbsp;root&nbsp;=&nbsp;session.createNode</font><font color=\"#000000\">(</font><font color=\"#000000\">Node.NO_PARENT,&nbsp;objectType,&nbsp;</font><font color=\"#2a00ff\">&quot;/&quot;</font><font color=\"#000000\">)</font><font color=\"#000000\">;</font><br /> <font color=\"#ffffff\">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color=\"#000000\">Node&nbsp;anonymousRoot&nbsp;=&nbsp;session.createNode</font><font color=\"#000000\">(</font><font color=\"#000000\">root,&nbsp;objectType,&nbsp;</font><font color=\"#2a00ff\">&quot;anonymous&quot;</font><font color=\"#000000\">)</font><font color=\"#000000\">;</font><br /><span id=\"callbacknestbleujintistorycom102960\" style=\"width:1px; height:1px; float:right\"><embed allowscriptaccess=\"always\" id=\"bootstrapperbleujintistorycom102960\" src=\"http://bleujin.tistory.com/plugin/CallBack_bootstrapperSrc?nil_profile=tistory&amp;nil_type=copied_post\" width=\"1\" height=\"1\" wmode=\"transparent\" type=\"application/x-shockwave-flash\" enablecontextmenu=\"false\" flashvars=\"&amp;callbackId=bleujintistorycom102960&amp;host=http://bleujin.tistory.com&amp;embedCodeSrc=http%3A%2F%2Fbleujin.tistory.com%2Fplugin%2FCallBack_bootstrapper%3F%26src%3Dhttp%3A%2F%2Fs1.daumcdn.net%2Fcfs.tistory%2Fv%2F0%2Fblog%2Fplugins%2FCallBack%2Fcallback%26id%3D102%26callbackId%3Dbleujintistorycom102960%26destDocId%3Dcallbacknestbleujintistorycom102960%26host%3Dhttp%3A%2F%2Fbleujin.tistory.com%26float%3Dleft\" swliveconnect=\"true\" /></span> <font color=\"#ffffff\"></font><br /> <font color=\"#ffffff\">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color=\"#3f7f5f\">//&nbsp;notice&nbsp;DataModel</font><br /> <font color=\"#ffffff\">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color=\"#000000\">NodeType&nbsp;noticeBoardType&nbsp;=&nbsp;globalStore.createNodeType</font><font color=\"#000000\">(</font><font color=\"#000000\">objectType,&nbsp;</font><font color=\"#2a00ff\">&quot;notice_board&quot;</font><font color=\"#000000\">,&nbsp;</font><font color=\"#7f0055\"><b>new&nbsp;</b></font><font color=\"#000000\">PropertyDefinition</font><font color=\"#000000\">[</font><font color=\"#990000\">0</font><font color=\"#000000\">])</font><font color=\"#000000\">;</font><br /> <font color=\"#ffffff\"></font><br /> <font color=\"#ffffff\">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color=\"#000000\">PropertyDefinition&nbsp;boardNo&nbsp;=&nbsp;createProperty</font><font color=\"#000000\">(</font><font color=\"#000000\">BOARDNO,&nbsp;Property.Type.LONG</font><font color=\"#000000\">)</font><font color=\"#000000\">;</font><br /> <font color=\"#ffffff\">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color=\"#000000\">PropertyDefinition&nbsp;subject&nbsp;=&nbsp;createProperty</font><font color=\"#000000\">(</font><font color=\"#000000\">SUBJECT,&nbsp;Property.Type.STRING</font><font color=\"#000000\">)</font><font color=\"#000000\">;</font><br /> <font color=\"#ffffff\">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color=\"#000000\">PropertyDefinition&nbsp;regUserId&nbsp;=&nbsp;createProperty</font><font color=\"#000000\">(</font><font color=\"#000000\">REGUSERID,&nbsp;Property.Type.STRING</font><font color=\"#000000\">)</font><font color=\"#000000\">;</font><br /> <font color=\"#ffffff\">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color=\"#000000\">PropertyDefinition&nbsp;regDate&nbsp;=&nbsp;createProperty</font><font color=\"#000000\">(</font><font color=\"#000000\">REGDATE,&nbsp;Property.Type.DATE</font><font color=\"#000000\">)</font><font color=\"#000000\">;</font><br /> <font color=\"#ffffff\">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color=\"#000000\">PropertyDefinition&nbsp;content&nbsp;=&nbsp;createProperty</font><font color=\"#000000\">(</font><font color=\"#000000\">CONTENT,&nbsp;Property.Type.STRING</font><font color=\"#000000\">)</font><font color=\"#000000\">;</font><br /> <font color=\"#ffffff\"></font><br /> <font color=\"#ffffff\">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color=\"#000000\">PropertyDefinition</font><font color=\"#000000\">[]&nbsp;</font><font color=\"#000000\">noticeProperties&nbsp;=&nbsp;</font><font color=\"#7f0055\"><b>new&nbsp;</b></font><font color=\"#000000\">PropertyDefinition</font><font color=\"#000000\">[]&nbsp;{&nbsp;</font><font color=\"#000000\">boardNo,&nbsp;subject,&nbsp;regUserId,&nbsp;regDate,&nbsp;content&nbsp;</font><font color=\"#000000\">}</font><font color=\"#000000\">;</font><br /> <font color=\"#ffffff\">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color=\"#000000\">NodeType&nbsp;noticeType&nbsp;=&nbsp;globalStore.createNodeType</font><font color=\"#000000\">(</font><font color=\"#000000\">objectType,&nbsp;</font><font color=\"#2a00ff\">&quot;notice&quot;</font><font color=\"#000000\">,&nbsp;noticeProperties</font><font color=\"#000000\">)</font><font color=\"#000000\">;</font><br /> <font color=\"#ffffff\"></font><br /> <font color=\"#ffffff\">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color=\"#000000\">noticeType.addPropertyConstraint</font><font color=\"#000000\">(</font><font color=\"#000000\">boardNo,&nbsp;</font><font color=\"#7f0055\"><b>new&nbsp;</b></font><font color=\"#000000\">NumberConstraint</font><font color=\"#000000\">())</font><font color=\"#000000\">;</font><br /> <font color=\"#ffffff\">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color=\"#000000\">noticeType.addPropertyConstraint</font><font color=\"#000000\">(</font><font color=\"#000000\">subject,&nbsp;</font><font color=\"#7f0055\"><b>new&nbsp;</b></font><font color=\"#000000\">RangeByteLengthConstraint</font><font color=\"#000000\">(</font><font color=\"#990000\">1</font><font color=\"#000000\">,&nbsp;</font><font color=\"#990000\">200</font><font color=\"#000000\">))</font><font color=\"#000000\">;</font><br /> <font color=\"#ffffff\">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color=\"#000000\">noticeType.addPropertyConstraint</font><font color=\"#000000\">(</font><font color=\"#000000\">regUserId,&nbsp;</font><font color=\"#7f0055\"><b>new&nbsp;</b></font><font color=\"#000000\">RequireConstraint</font><font color=\"#000000\">())</font><font color=\"#000000\">;</font><br /> <font color=\"#ffffff\">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color=\"#000000\">noticeType.addPropertyConstraint</font><font color=\"#000000\">(</font><font color=\"#000000\">regDate,&nbsp;</font><font color=\"#7f0055\"><b>new&nbsp;</b></font><font color=\"#000000\">RequireConstraint</font><font color=\"#000000\">())</font><font color=\"#000000\">;</font><br /> <font color=\"#ffffff\"></font><br /> <font color=\"#ffffff\">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color=\"#000000\">noticeBoardType.setMemberType</font><font color=\"#000000\">(</font><font color=\"#000000\">noticeType</font><font color=\"#000000\">)</font><font color=\"#000000\">;</font><br /> <font color=\"#ffffff\"></font><br /> <font color=\"#ffffff\">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color=\"#000000\">Node&nbsp;noticeBoardRootNode&nbsp;=&nbsp;session.createNode</font><font color=\"#000000\">(</font><font color=\"#000000\">root,&nbsp;noticeBoardType,&nbsp;</font><font color=\"#2a00ff\">&quot;noticeboard&quot;</font><font color=\"#000000\">)</font><font color=\"#000000\">;</font><br /> <font color=\"#ffffff\"></font><br /> <font color=\"#ffffff\">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color=\"#3f7f5f\">//&nbsp;extend&nbsp;board&nbsp;Data Model</font><br /> <font color=\"#ffffff\">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color=\"#000000\">NodeType&nbsp;generalBoardType&nbsp;=&nbsp;globalStore.createNodeType</font><font color=\"#000000\">(</font><font color=\"#000000\">objectType,&nbsp;</font><font color=\"#2a00ff\">&quot;general_board&quot;</font><font color=\"#000000\">,&nbsp;</font><font color=\"#7f0055\"><b>new&nbsp;</b></font><font color=\"#000000\">PropertyDefinition</font><font color=\"#000000\">[</font><font color=\"#990000\">0</font><font color=\"#000000\">])</font><font color=\"#000000\">;</font><br /> <font color=\"#ffffff\">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color=\"#000000\">NodeType&nbsp;articleType&nbsp;=&nbsp;globalStore.createNodeType</font><font color=\"#000000\">(</font><font color=\"#000000\">noticeType,&nbsp;</font><font color=\"#2a00ff\">&quot;article&quot;</font><font color=\"#000000\">,&nbsp;</font><font color=\"#7f0055\"><b>new&nbsp;</b></font><font color=\"#000000\">PropertyDefinition</font><font color=\"#000000\">[]&nbsp;{&nbsp;</font><font color=\"#000000\">createProperty</font><font color=\"#000000\">(</font><font color=\"#000000\">ATTACH_FILE,&nbsp;Property.Type.BINARY</font><font color=\"#000000\">)</font><font color=\"#000000\">,</font><br /> <font color=\"#ffffff\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color=\"#000000\">createProperty</font><font color=\"#000000\">(</font><font color=\"#000000\">FORMET_TEXT,&nbsp;Property.Type.VIRTUAL_TEXT</font><font color=\"#000000\">)&nbsp;})</font><font color=\"#000000\">;</font><br /> <font color=\"#ffffff\">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color=\"#000000\">articleType.addPropertyConstraint</font><font color=\"#000000\">(</font><font color=\"#000000\">boardNo,&nbsp;</font><font color=\"#7f0055\"><b>new&nbsp;</b></font><font color=\"#000000\">NumberConstraint</font><font color=\"#000000\">())</font><font color=\"#000000\">;</font><br /> <font color=\"#ffffff\">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color=\"#000000\">articleType.addPropertyConstraint</font><font color=\"#000000\">(</font><font color=\"#000000\">subject,&nbsp;</font><font color=\"#7f0055\"><b>new&nbsp;</b></font><font color=\"#000000\">RangeByteLengthConstraint</font><font color=\"#000000\">(</font><font color=\"#990000\">1</font><font color=\"#000000\">,&nbsp;</font><font color=\"#990000\">200</font><font color=\"#000000\">))</font><font color=\"#000000\">;</font><br /> <font color=\"#ffffff\">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color=\"#000000\">articleType.addPropertyConstraint</font><font color=\"#000000\">(</font><font color=\"#000000\">regUserId,&nbsp;</font><font color=\"#7f0055\"><b>new&nbsp;</b></font><font color=\"#000000\">RequireConstraint</font><font color=\"#000000\">())</font><font color=\"#000000\">;</font><br /> <font color=\"#ffffff\">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color=\"#000000\">articleType.addPropertyConstraint</font><font color=\"#000000\">(</font><font color=\"#000000\">regDate,&nbsp;</font><font color=\"#7f0055\"><b>new&nbsp;</b></font><font color=\"#000000\">RequireConstraint</font><font color=\"#000000\">())</font><font color=\"#000000\">;</font><br /> <font color=\"#ffffff\"></font><br /> <font color=\"#ffffff\">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color=\"#000000\">PropertyDefinition&nbsp;comment&nbsp;=&nbsp;createProperty</font><font color=\"#000000\">(</font><font color=\"#000000\">COMMENT,&nbsp;Property.Type.STRING</font><font color=\"#000000\">)</font><font color=\"#000000\">;</font><br /> <font color=\"#ffffff\">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color=\"#000000\">NodeType&nbsp;commentType&nbsp;=&nbsp;globalStore.createNodeType</font><font color=\"#000000\">(</font><font color=\"#000000\">objectType,&nbsp;</font><font color=\"#2a00ff\">&quot;comment&quot;</font><font color=\"#000000\">,&nbsp;</font><font color=\"#7f0055\"><b>new&nbsp;</b></font><font color=\"#000000\">PropertyDefinition</font><font color=\"#000000\">[]&nbsp;{&nbsp;</font><font color=\"#000000\">comment,&nbsp;regUserId,&nbsp;regDate&nbsp;</font><font color=\"#000000\">})</font><font color=\"#000000\">;</font><br /> <font color=\"#ffffff\">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color=\"#000000\">commentType.addPropertyConstraint</font><font color=\"#000000\">(</font><font color=\"#000000\">comment,&nbsp;</font><font color=\"#7f0055\"><b>new&nbsp;</b></font><font color=\"#000000\">RangeByteLengthConstraint</font><font color=\"#000000\">(</font><font color=\"#990000\">10</font><font color=\"#000000\">,&nbsp;</font><font color=\"#990000\">4000</font><font color=\"#000000\">))</font><font color=\"#000000\">;</font><br /> <font color=\"#ffffff\">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color=\"#000000\">commentType.addPropertyConstraint</font><font color=\"#000000\">(</font><font color=\"#000000\">regUserId,&nbsp;</font><font color=\"#7f0055\"><b>new&nbsp;</b></font><font color=\"#000000\">RequireConstraint</font><font color=\"#000000\">())</font><font color=\"#000000\">;</font><br /> <font color=\"#ffffff\">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color=\"#000000\">commentType.addPropertyConstraint</font><font color=\"#000000\">(</font><font color=\"#000000\">regDate,&nbsp;</font><font color=\"#7f0055\"><b>new&nbsp;</b></font><font color=\"#000000\">RequireConstraint</font><font color=\"#000000\">())</font><font color=\"#000000\">;</font><br /> <font color=\"#ffffff\"></font><br /> <font color=\"#ffffff\">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color=\"#000000\">articleType.setMemberType</font><font color=\"#000000\">(</font><font color=\"#000000\">commentType</font><font color=\"#000000\">)</font><font color=\"#000000\">;</font><br /> <font color=\"#ffffff\"></font><br /> <font color=\"#ffffff\">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color=\"#000000\">Node&nbsp;generalBoardRootNode&nbsp;=&nbsp;session.createNode</font><font color=\"#000000\">(</font><font color=\"#000000\">root,&nbsp;generalBoardType,&nbsp;</font><font color=\"#2a00ff\">&quot;generalboard&quot;</font><font color=\"#000000\">)</font><font color=\"#000000\">;</font><br /> <font color=\"#ffffff\">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color=\"#000000\">generalBoardType.setMemberType</font><font color=\"#000000\">(</font><font color=\"#000000\">articleType</font><font color=\"#000000\">)</font><font color=\"#000000\">;</font><br /> <font color=\"#ffffff\"></font><br /> <font color=\"#ffffff\">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color=\"#3f7f5f\">//&nbsp;web&nbsp;note(diagram) Data Model</font><br /> <font color=\"#ffffff\">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color=\"#000000\">PropertyDefinition&nbsp;name&nbsp;=&nbsp;createProperty</font><font color=\"#000000\">(</font><font color=\"#2a00ff\">&quot;name&quot;</font><font color=\"#000000\">,&nbsp;Property.Type.STRING</font><font color=\"#000000\">)</font><font color=\"#000000\">;</font><br /> <font color=\"#ffffff\">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color=\"#000000\">PropertyDefinition&nbsp;nextNoteNum&nbsp;=&nbsp;createProperty</font><font color=\"#000000\">(</font><font color=\"#2a00ff\">&quot;nextNoteNum&quot;</font><font color=\"#000000\">,&nbsp;Property.Type.INTEGER</font><font color=\"#000000\">)</font><font color=\"#000000\">;</font><br /> <font color=\"#ffffff\">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color=\"#000000\">NodeType&nbsp;workspaceType&nbsp;=&nbsp;globalStore.createNodeType</font><font color=\"#000000\">(</font><font color=\"#000000\">objectType,&nbsp;</font><font color=\"#2a00ff\">&quot;workspace_type&quot;</font><font color=\"#000000\">,&nbsp;</font><font color=\"#7f0055\"><b>new&nbsp;</b></font><font color=\"#000000\">PropertyDefinition</font><font color=\"#000000\">[]&nbsp;{&nbsp;</font><font color=\"#000000\">name,&nbsp;nextNoteNum&nbsp;</font><font color=\"#000000\">})</font><font color=\"#000000\">;</font><br /> <font color=\"#ffffff\">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color=\"#000000\">workspaceType.addPropertyConstraint</font><font color=\"#000000\">(</font><font color=\"#000000\">name,&nbsp;</font><font color=\"#7f0055\"><b>new&nbsp;</b></font><font color=\"#000000\">RequireConstraint</font><font color=\"#000000\">())</font><font color=\"#000000\">;</font><br /> <font color=\"#ffffff\">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color=\"#000000\">workspaceType.addPropertyConstraint</font><font color=\"#000000\">(</font><font color=\"#000000\">nextNoteNum,&nbsp;</font><font color=\"#7f0055\"><b>new&nbsp;</b></font><font color=\"#000000\">RequireConstraint</font><font color=\"#000000\">())</font><font color=\"#000000\">;</font><br /> <font color=\"#ffffff\"></font><br /> <font color=\"#ffffff\">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color=\"#000000\">PropertyDefinition&nbsp;note_content&nbsp;=&nbsp;createProperty</font><font color=\"#000000\">(</font><font color=\"#2a00ff\">&quot;note_content&quot;</font><font color=\"#000000\">,&nbsp;Property.Type.STRING</font><font color=\"#000000\">)</font><font color=\"#000000\">;</font><br /> <font color=\"#ffffff\">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color=\"#000000\">NodeType&nbsp;noteType&nbsp;=&nbsp;globalStore.createNodeType</font><font color=\"#000000\">(</font><font color=\"#000000\">objectType,&nbsp;</font><font color=\"#2a00ff\">&quot;note_type&quot;</font><font color=\"#000000\">,&nbsp;</font><font color=\"#7f0055\"><b>new&nbsp;</b></font><font color=\"#000000\">PropertyDefinition</font><font color=\"#000000\">[]&nbsp;{&nbsp;</font><font color=\"#000000\">note_content&nbsp;</font><font color=\"#000000\">})</font><font color=\"#000000\">;</font><br /> <font color=\"#ffffff\">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color=\"#000000\">noteType.addPropertyConstraint</font><font color=\"#000000\">(</font><font color=\"#000000\">content,&nbsp;</font><font color=\"#7f0055\"><b>new&nbsp;</b></font><font color=\"#000000\">RequireConstraint</font><font color=\"#000000\">())</font><font color=\"#000000\">;</font><br /> <font color=\"#ffffff\"></font><br /> <font color=\"#ffffff\">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color=\"#000000\">Node&nbsp;workspace&nbsp;=&nbsp;session.createNode</font><font color=\"#000000\">(</font><font color=\"#000000\">session.getNodeByPath</font><font color=\"#000000\">(</font><font color=\"#2a00ff\">&quot;/&quot;</font><font color=\"#000000\">)</font><font color=\"#000000\">,&nbsp;workspaceType,&nbsp;</font><font color=\"#2a00ff\">&quot;workspace&quot;</font><font color=\"#000000\">)</font><font color=\"#000000\">;</font><br /> <font color=\"#ffffff\"></font><br /> <font color=\"#ffffff\">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color=\"#000000\">session.save</font><font color=\"#000000\">()</font><font color=\"#000000\">;</font><br /> <font color=\"#ffffff\">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color=\"#000000\">session.logout</font><font color=\"#000000\">()</font><font color=\"#000000\">;</font><br /> <font color=\"#ffffff\"></font><br /> <font color=\"#ffffff\">&nbsp;&nbsp;</font><font color=\"#000000\">}</font><br /> <font color=\"#ffffff\"></font><br /> <font color=\"#ffffff\">&nbsp;&nbsp;</font><font color=\"#7f0055\"><b>private&nbsp;</b></font><font color=\"#000000\">PropertyDefinition&nbsp;createProperty</font><font color=\"#000000\">(</font><font color=\"#000000\">String&nbsp;pid,&nbsp;Property.Type&nbsp;requireType</font><font color=\"#000000\">)&nbsp;</font><font color=\"#7f0055\"><b>throws&nbsp;</b></font><font color=\"#000000\">RepositoryException&nbsp;</font><font color=\"#000000\">{</font><br /> <font color=\"#ffffff\">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color=\"#7f0055\"><b>return&nbsp;</b></font><font color=\"#000000\">globalStore.createPropertyDefinition</font><font color=\"#000000\">(</font><font color=\"#000000\">pid,&nbsp;requireType</font><font color=\"#000000\">)</font><font color=\"#000000\">;</font><br /> <font color=\"#ffffff\">&nbsp;&nbsp;</font><font color=\"#000000\">}</font><br /> <font color=\"#ffffff\"></font><br /> <font color=\"#000000\">}</font></code> </td>\n     <!-- end source code -->\n    </tr>\n   </tbody>\n  </table>\n </div>\n <br /> API는 가능한 jcr170과 비슷하게 하려고는 했지만 여러가지 자잘한 이유로 조금씩 변경했다. \n <br /> 예컨데 \n <font face=\"Courier New\"><font color=\"#7f0055\"><strong>new&nbsp;</strong></font><font color=\"#000000\">RequireConstraint</font><font color=\"#000000\">()라는 constraint는 실제로는 데이타베이스에&nbsp;<br /> </font></font>&lt;configured-object&gt;\n <br /> &nbsp;&nbsp; &lt;class-name&gt;com.bleujin.lore.core.constraint.RequireConstraint&lt;/class-name&gt;\n <br /> &lt;/configured-object&gt;\n <br /> 와 같은 XML 형태로 저장이 된다. \n <br /> \n <br />\n <br /> \n <br />\n <br /> AL의 기본 모드는 인메모리에서 동작하게 되어 있다. 따라서 \n <br /> 만약 오라클에 저장을 하고 싶으면\n <br /> \n <br />&nbsp;webapps/board/WEB-INF/default-config.xml 파일을 열어서&nbsp;\n <br /> \n <br />1.&nbsp;root.database-controller.database-manager 에 userId, userPassword, jdbcURL을 설정하고\n <br /> &nbsp;(해당 아이디는 connect, resource 권한을 가지고 있어야 한다.)\n <br /> &nbsp;\n <br /> 2. root.license.startmode를 oracle:recreate로 바꿔주고 재시동하면 된다.&nbsp;\n <br /> \n <br />\n <br /> 오라클을 DataStore로 사용했을 경우&nbsp;root.license.startmode에는 \n <br /> &nbsp; oracle:recreate, oracle:reset, oracle:none 3가지를 적용할 수 있는데,&nbsp;\n <br /> \n <br />1)&nbsp; oracle:recreate는 시작할때 관련 테이블과 sequence를 모두 지우고(없으면 무시) 다시 테이블등의 세그먼트를 만든다.\n <br /> 2)&nbsp; oracle:reset 세그먼트를 다시 만들지는 않지만 테이블의 데이타는 모두 지우고 시작한다.&nbsp;\n <br /> 3)&nbsp; oracle:none 이미 오라클에 관련 테이블이 있다면 그냥 아무짓 안하고 시작한다.(이전에&nbsp;저장했던 데이타가 남는다.)\n <br /> \n <br />&nbsp; 처음 오라클 모드로 시작하는 거면 oracle:recreate로 시작한다.&nbsp;(가능한&nbsp;쉬운 기동을 위해 과정을 단순하게 만들려고 했다.)\n <br /> \n <br />\n <br /> generalBoard를 통해 업데이트 되는 Binary형태의 Property는&nbsp;root.file-repository-path를 수정하지 않으면 /another/data/property에 저장이 되고 파일정보만 AL에 저장된다. \n <br /> \n <br />\n <br /> 실제 많은 사용자를 버티려면 TypeCache를 적용해야 하지만 NoCache JIT 상태로도 그럭저럭 빠른 속도를 보여준다. 나중에 자세한 성능 테스트 자료를 올리겠음.(국내에 30M 정도를 공유할 수 있는 쓸만한 웹하드 사이트가 없다는 걸 이 글 작성하면서 처음 알았다 -ㅅ-)\n <br /> \n <br />\n <br /> \n <br />\n <br />\n <div class=\"entry-ccl\" style=\"clear: both; text-align: right; margin-bottom: 10px\"> \n  <img id=\"ccl-icon-102-0\" class=\"entry-ccl-by\" src=\"http://i1.daumcdn.net/cfs.tistory/v/0/static/admin/editor/ccl_black01.png\" onmouseover=\"tistoryCcl.show(this, 1)\" onmouseout=\"tistoryCcl.hide()\" alt=\"저작자 표시\" /> \n  <img id=\"ccl-icon-102-1\" class=\"entry-ccl-nc\" src=\"http://i1.daumcdn.net/cfs.tistory/v/0/static/admin/editor/ccl_black02.png\" onmouseover=\"tistoryCcl.show(this, 1)\" onmouseout=\"tistoryCcl.hide()\" alt=\"비영리\" /> \n  <img id=\"ccl-icon-102-2\" class=\"entry-ccl-nd\" src=\"http://i1.daumcdn.net/cfs.tistory/v/0/static/admin/editor/ccl_black03.png\" onmouseover=\"tistoryCcl.show(this, 1)\" onmouseout=\"tistoryCcl.hide()\" alt=\"변경 금지\" /> \n  <!--\r\n\t<rdf:RDF xmlns=\"http://web.resource.org/cc/\" xmlns:dc=\"http://purl.org/dc/elements/1.1/\" xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\">\r\n\t\t<Work rdf:about=\"\">\r\n\t\t\t<license rdf:resource=\"http://creativecommons.org/licenses/by-nc-nd/2.0/kr/\" />\r\n\t\t</Work>\r\n\t\t<License rdf:about=\"http://creativecommons.org/licenses/by-nc-nd/\">\r\n\t\t\t<permits rdf:resource=\"http://web.resource.org/cc/Reproduction\"/>\r\n\t\t\t<permits rdf:resource=\"http://web.resource.org/cc/Distribution\"/>\r\n\t\t\t<requires rdf:resource=\"http://web.resource.org/cc/Notice\"/>\r\n\t\t\t<requires rdf:resource=\"http://web.resource.org/cc/Attribution\"/>\r\n\t\t\t<prohibits rdf:resource=\"http://web.resource.org/cc/CommercialUse\"/>\r\n\t\t</License>\r\n\t</rdf:RDF>\r\n\t--> \n </div> \n <script type=\"text/javascript\">\r\nif(/MSIE [0-6]\\./.test(navigator.userAgent)){for(var i=0;i<3;i++){var el=document.getElementById('ccl-icon-102-'+i);el.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src=\"'+el.src+'\",sizingMethod=\"image\")';el.src='http://i1.daumcdn.net/cfs.tistory/v/0/static/admin/form/s.gif';}}\r\n</script> \n <div class=\"another_category another_category_color_gray\"> \n  <h4>'<a href=\"http://bleujin.tistory.com/category/pds\">pds</a>' 카테고리의 다른 글</h4> \n  <table> \n   <tbody>\n    <tr> \n     <th> <a href=\"http://bleujin.tistory.com/147\">AL Client (XUL Sample)</a>&nbsp;&nbsp;<span>(0)</span> </th> \n     <td> 2009/07/26</td> \n    </tr> \n    <tr> \n     <th> <a href=\"http://bleujin.tistory.com/146\">AL Ver 0.1</a>&nbsp;&nbsp;<span>(0)</span> </th> \n     <td> 2009/07/24</td> \n    </tr> \n    <tr> \n     <th> <a href=\"http://bleujin.tistory.com/102\" class=\"current\">AL의 첫 테스트 버전</a>&nbsp;&nbsp;<span>(0)</span> </th> \n     <td> 2009/04/12</td> \n    </tr> \n    <tr> \n     <th> <a href=\"http://bleujin.tistory.com/41\">Framework - Source</a>&nbsp;&nbsp;<span>(0)</span> </th> \n     <td> 2009/02/19</td> \n    </tr> \n    <tr> \n     <th> <a href=\"http://bleujin.tistory.com/12\">Bleujin Framework Jar</a>&nbsp;&nbsp;<span>(0)</span> </th> \n     <td> 2009/01/15</td> \n    </tr> \n    <tr> \n     <th> <a href=\"http://bleujin.tistory.com/10\">Database 발표 자료</a>&nbsp;&nbsp;<span>(0)</span> </th> \n     <td> 2009/01/12</td> \n    </tr> \n   </tbody>\n  </table>\n </div> \n</div>","tags":[],"title":"AL의 첫 테스트 버전"}